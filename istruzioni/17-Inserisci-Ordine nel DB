Nel passo successivo è stata creata la sessione

@if (Session::has('Aggiorna'))
<div class="checkout-right-basket">
    <a href="/ProcediOrdine">Vai al pagamento <span class="glyphicon
            glyphicon-chevron-right"
            aria-hidden="true"></span></a>
</div>
@endif
Pero' prima di utilizzarlaì, dobbiamo creare un modello : Order
php artisan make:model Order -m
Nel file di migration

public function up()
{
Schema::create('orders', function (Blueprint $table) {
$table->id();
$table->string('Customer_id');
$table->string('nome');
$table->string('indirizzo');
$table->string('citta');
$table->mediumText('cart');
$table->decimal('prezzo', $precision = 8, $scale = 2);
$table->integer('stato');
$table->timestamps();
});
}

adesso possimao andare e <a href="/ProcediOrdine"></a>
Si va attraverso web.php
Route::any('/ProcediOrdine', [TemaController::class, 'ProcediOrdine']);
In tema controller:
-  use App\Models\Order;
-alla funzione ProcediOrdine


public function ProcediOrdine()
{
$oldCart = Session::has('cart')? Session::get('cart'):null;
$cart = new Cart($oldCart);
$order= new Order;
$order->Customer_id= (Session('Customer')->id);
$order->nome= (Session('Customer')->email);
$order->indirizzo= (Session('Aggiorna')->indirizzo);
$order->nome= (Session('Customer')->email);
$order->citta= (Session('Aggiorna')->citta);
$order->cart = serialize($cart);
$order->prezzo= (Session('cart')->totalPrice);
$order->stato = 1;
Session::put('Order', $order);
$order->save();

return redirect('/pagamenti')->with('status', 'ordine aggiornato');
}

php artisan migrate --path=database/migrations/2022_11_18_090640_create_orders_table.php

Questa funzione ha il compito di inserire i dati dell' ordine e in particolare
Nella colonna cart del DB, tutta la sessione cart che contiene i dettagli
del''ordine
Le istruzioni chiave sono
$oldCart = Session::has('cart')? Session::get('cart'):null;
$cart = new Cart($oldCart);
$order= new Order;
$order->cart = serialize($cart);

serialize in laravel
È un modo per memorizzare i valori di un oggetto in un formato di stringa di
testo.
Vedi :
http://stackoverflow.com/questions/8641889/how-to-use-php-serialize-and-unserialize.
